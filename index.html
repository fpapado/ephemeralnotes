<!DOCTYPE html>
<html lang="en" class="fonts-not-asked">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ephemeral is an app for writing down words and their translations, as you encounter them.">

  <title>Ephemeral</title>

  <link rel="manifest" href="/assets/manifest.json">
  </link>

  <script>
    (function () {
      'use strict';
      var r = document.documentElement;

      // Only preload the woff2 version, since
      // the font loading API is not available in
      // other browsers anyway
      var wildberryBold = new FontFace(
        'Wildberry',
        'url(/assets/fonts/Wildberry-v0.2-Bold-Web.woff2)',
        {
          style: 'normal',
          weight: '700'
        }
      );
      document.fonts.add(wildberryBold);

      // optimise repeat views
      if (sessionStorage.fontsLoaded) {
        r.classList.add('fonts-loaded');
        console.log('Fonts: already loaded')
        return;
      } else if ('fonts' in document) {
        wildberryBold.load()
          .then(function () {
            r.classList.add('fonts-loaded');
            console.log('Fonts: loaded')
          })
          .catch(function (e) { console.error('Fonts: Stage 1 failed', e); });
      } else {
        // if no font API, then let the browser do its loading as usual
        sessionStorage.fontsLoaded = true;
        r.classList.add('fonts-loaded');
      }
    })();
  </script>
  <noscript>
    <style>
      .fonts-not-asked .f-wildberry {
        font-family: 'Wildberry', Arial, Helvetica, sans-serif !important;
      }
    </style>
  </noscript>
</head>

<body>
  <div class="min-vh-100 flex flex-column sans-serif bg-washed-blue near-black">
    <header class="pv2 navy bg-white shadow-1">
      <a href="#main" class="pa3 tc near-white bg-blue skip-link">
        Skip to content
      </a>
      <nav class="tc">
        <a href="/" class="f3 fw7 link navy tc ttu f-wildberry">Ephemeral</a>
      </nav>
    </header>
    <main id="main" class="flex-auto">
      <div class="pa3 mw8 center">
        <noscript>
          <div class="measure center vs4">
            <h1 class="mv4 f3 f2-ns lh-title f-wildberry">Javascript is turned off :(</h1>
            <p class="mv0 f5 f4-ns lh-copy">
              Sorry, Ephemeral requires Javascript to run. This is because it does everything on the client, after the initial hand-off
              from the server. I don't want to have people's data, and a server-only version would need that to be effective.
            </p>
          </div>
        </noscript>
      </div>
    </main>
  </div>

  <script>
    // Check that service workers are registered
    if ('serviceWorker' in navigator) {
      let deferredPrompt;

      // Use the window load event to keep the page load performant
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').then(registration => {
          console.log('SW registered: ', registration);
        }).catch(registrationError => {
          console.log('SW registration failed: ', registrationError);
        });
      });

      // Log if the app was installed
      window.addEventListener('appinstalled', (evt) => {
        app.logEvent('a2hs', 'installed');
      });
    }
  </script>
</body>

</html>
